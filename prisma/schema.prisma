generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Guest {
  id       Int    @id @default(autoincrement())
  nama     String
  nickname String @unique  // Make sure this line has @unique
  
  // Relations
  attendances Attendance[]
  messages    Message[]
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("guests")
}

model Attendance {
  id          Int    @id @default(autoincrement())
  guestId     Int    @map("guest_id")
  nama        String
  konfirmasi  String // "Akad", "Resepsi", "Akad dan Resepsi", "Maaf, Saya belum bisa hadir"
  jumlahTamu  Int    @map("jumlah_tamu")
  
  // Relations
  guest Guest @relation(fields: [guestId], references: [id], onDelete: Cascade)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("attendances")
}

model Message {
  id      Int    @id @default(autoincrement())
  guestId Int    @map("guest_id")
  message String
  name    String
  
  // Relations
  guest Guest @relation(fields: [guestId], references: [id], onDelete: Cascade)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("messages")
}